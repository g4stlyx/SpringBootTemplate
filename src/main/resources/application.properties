#! Application Configuration
spring.application.name=${APP_NAME:Template App}
server.port=${SERVER_PORT:8080}

#! Enable 404 for non-existent paths (instead of default 500)
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

#! Database Configuration - MySQL
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:templateapp}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Europe/Istanbul&createDatabaseIfNotExist=true&useUnicode=true&characterEncoding=UTF-8
spring.datasource.username=${DB_USER:root}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

#! JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.show-sql=${SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.defer-datasource-initialization=false
spring.jpa.generate-ddl=true

#! Connection Pool Configuration - HikariCP
spring.datasource.hikari.maximum-pool-size=${DB_POOL_MAX_ACTIVE:20}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.leak-detection-threshold=60000

#! Security Configuration
app.security.pepper=${PEPPER:}
app.jwt.secret=${JWT_SECRET:}
app.jwt.expiration=${JWT_EXPIRATION_MS:900000}
app.jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION_MS:2592000000}
app.refresh-token.cookie-name=refreshToken
app.refresh-token.cookie-max-age=2592000
app.refresh-token.use-cookies=true
app.refresh-token.cookie-secure=${COOKIE_SECURE:true}
app.jwt.algorithm=RS256
app.jwt.issuer=g4stly

#! Password Hashing - Argon2id
app.security.argon2.memory-cost=${ARGON2_MEMORY_COST:65536}
app.security.argon2.time-cost=${ARGON2_TIME_COST:3}
app.security.argon2.parallelism=${ARGON2_PARALLELISM:4}
app.security.argon2.salt-length=${ARGON2_SALT_LENGTH:32}
app.security.argon2.hash-length=${ARGON2_HASH_LENGTH:64}

#! Cloudflare R2 Configuration
cloudflare.r2.access-key=${CLOUDFLARE_R2_ACCESS_KEY}
cloudflare.r2.secret-key=${CLOUDFLARE_R2_SECRET_KEY}
cloudflare.r2.account-id=${CLOUDFLARE_R2_ACCOUNT_ID}
cloudflare.r2.bucket-name=${CLOUDFLARE_R2_BUCKET_NAME}
cloudflare.r2.public-domain=${CLOUDFLARE_R2_PUBLIC_DOMAIN}

#! Email Configuration
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_HOST:smtp.gmail.com}

#! Frontend Configuration
app.frontend.url=${FRONTEND_URL:http://localhost:3000}
app.admin.email=${ADMIN_EMAIL:x@y.com}

#! Rate Limiting Configuration
# Global rate limit (applies to all requests per IP)
app.rate-limit.global.requests=${RATE_LIMIT_GLOBAL_REQUESTS:30}
app.rate-limit.global.window=${RATE_LIMIT_GLOBAL_WINDOW:60000}

app.rate-limit.login.attempts=${RATE_LIMIT_LOGIN_ATTEMPTS:5}
app.rate-limit.login.window=${RATE_LIMIT_LOGIN_WINDOW:900000}
app.rate-limit.api.calls=${RATE_LIMIT_API_CALLS:100}
app.rate-limit.api.window=${RATE_LIMIT_API_WINDOW:60000}
app.rate-limit.chat.requests=${RATE_LIMIT_CHAT_REQUESTS:20}
app.rate-limit.chat.window=${RATE_LIMIT_CHAT_WINDOW:60000}
app.rate-limit.email-verification.attempts=${RATE_LIMIT_EMAIL_VERIFICATION_ATTEMPTS:3}
app.rate-limit.email-verification.window=${RATE_LIMIT_EMAIL_VERIFICATION_WINDOW:3600000}

#! CORS Configuration
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}
app.cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
app.cors.allowed-headers=${CORS_ALLOWED_HEADERS:Authorization,Content-Type}

#! ReCAPTCHA Configuration (Admin Login Only) //TODO: will be added after domain purchase
recaptcha.site-key=${RECAPTCHA_SITE_KEY}
recaptcha.secret-key=${RECAPTCHA_SECRET_KEY}
recaptcha.enabled=${RECAPTCHA_ENABLED:true}
recaptcha.score-threshold=${RECAPTCHA_SCORE_THRESHOLD:0.5}

#! Authentication Error Logging
app.security.log-auth-errors=${LOG_AUTH_ERRORS:true}

#! Sensitive Endpoint Access Logging
app.security.log-sensitive-access=${LOG_SENSITIVE_ACCESS:true}
app.security.sensitive-access-email-alert=${SENSITIVE_ACCESS_EMAIL_ALERT:true}

#! Data Initialization (set to true to create default users on startup)
#! Users created: g4stly (admin), coach, client - all with password "12345678"
app.data.init-users=${INIT_USERS:false}

#! Application Name (for 2FA)
app.name=Template App

#! Database Backup Configuration
app.email.sender=no-reply@g4stly.tr
app.database.backup.enabled=${DATABASE_BACKUP_ENABLED:true}
app.database.backup.recipient-email=${DATABASE_BACKUP_EMAIL:}
app.database.backup.directory=${DATABASE_BACKUP_DIRECTORY:backups}
app.database.backup.mysqldump-path=${MYSQLDUMP_PATH:mysqldump}

app.activity-log.retention-days=${ACTIVITY_LOG_RETENTION_DAYS:30}